<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>時區</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="./stylesheet/all.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700,700i,800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>

<body>
  <div id="app">
    <div class="title border-left-0 border-right-0 py-2 my-3">
      <h1>WORLD CLOCK</h1>
    </div>
    <div class="timetable">
      <time-info v-for="item in location" :prop-location="item"></time-info>
    </div>
  </div>
  <!-- <script src="./stylesheet/all.js"></script> -->
  <script type="text/x-template" id="timeInfo">
  <div class="d-flex justify-content-between align-items-center px-4 py-3">
    <div>
      <h2>{{propLocation.city}}</h2>
      <span>{{getData(propLocation.timeZone)[0]}}</span>
    </div>
    <div class="time">{{getData(propLocation.timeZone)[1]}}</div>
  </div>
</script>

  <script>
    var timeInfo = {
      template: '#timeInfo',
      props:['propLocation'],
      data() {
        return {
          comLocation:this.propLocation,
        }
      },
      created(){
        // this.updateTime();
      },
      methods:{
        getData(location) {
          var option = { timeZone: location, day: 'numeric', month: 'short', year: 'numeric', hour12: false, minute: 'numeric', hour: 'numeric' };
          var arr = new Date().toLocaleDateString('en-GB', option).split(" ");
          var currentDay = arr.slice(0, 3);
          currentDay.splice(1, 0, " ");
          currentDay.splice(3, 0, ".");
          currentDay = currentDay.join("").replace(/\,/g, "");
          console.log(currentDay);
          var currentTime = arr.slice(3).join('');
          // this.today = currentDay;
          // this.time = currentTime;
          return [currentDay,currentTime];
        },
        // updateTime() {
        //   var vm = this;
        //   setInterval(function () {
        //     vm.getData();
        //   }, 1000);
        // },
        test(av){
          var obj = {hi:1,hello:av}
          var obja = obj.hi;
          var objb = obj.hello;
          console.log(obja);
          console.log(objb);
          return [obja,objb];
        },
        updateTest(av){
          var vm = this;
          var avo = av;
          setInterval(function(avo){
            vm.test(avo);
          },1000);
        }
      }
    }

    var app = new Vue({
      el: '#app',
      data: {
        time: '',
        today: '',
        location: [
          {
            city: 'NEW YORK',
            timeZone: 'America/New_York',
            // time: this.getData('America/New_York')
          },
          {
            city: 'LONDON',
            timeZone: 'Europe/London',
            // time: this.getData('Europe/London')
          },
          {
            city: 'BANGKOK',
            timeZone: 'Asia/Bangkok',
            // time: this.getData('Asia/Bangkok')
          },
          {
            city: 'TAIWAN',
            timeZone: 'Asia/Taipei',
            // time: this.getData('Asia/Taipei')
          },
          {
            city: 'SYDNEY',
            timeZone: 'Australia/Sydney',
            // time: this.getData('Australia/Sydney')
          }
        ]
      },
      components: {
        'time-info': timeInfo,
      },
      created() {
        // this.updateTime();
      },
      methods: {
        // getData(location) {
        //   var option = { timeZone: location, day: 'numeric', month: 'short', year: 'numeric', hour12: false, minute: 'numeric', hour: 'numeric' };
        //   var arr = new Date().toLocaleDateString('en-GB', option).split(" ");
        //   var currentDay = arr.slice(0, 3);
        //   currentDay.splice(1, 0, " ");
        //   currentDay.splice(3, 0, ".");
        //   currentDay = currentDay.join("").replace(/\,/g, "");
        //   console.log(currentDay);
        //   var currentTime = arr.slice(3).join('');
        //   // this.today = currentDay;
        //   // this.time = currentTime;
        //   return [currentDay,currentTime];
        // },
        // updateTime() {
        //   var vm = this;
        //   setInterval(function () {
        //     vm.getData("Asia/Shanghai");
        //   }, 1000);
        // }
      }
    })
  </script>

</body>

</html>